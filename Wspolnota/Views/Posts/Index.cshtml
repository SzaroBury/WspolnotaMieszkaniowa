@model IEnumerable<Wspolnota.Models.Post>

@{
    ViewBag.Title = "Posty społeczności";
}

<h2>@Model.First().Community.Name</h2>

<div>
    <p style="text-align:center">
        <a href="../Create/@Model.First().CommunityId" class="btn btn-primary btn-lg">
            Dodaj nowy
        </a>
    </p>


    @foreach (var item in Model.OrderByDescending(p => p.CreatedAt.Date).ThenByDescending(p => p.CreatedAt.TimeOfDay).ToList())
    {
        @:<div style="border: 1px solid lightgrey; padding:1%; margin:2%; text-align:center;">


    if (item.GetType().Name.ToString() == "Announcement")
    {
        @Html.Partial("AnnouncementRenderer", item)
    }
    else if (item.GetType().Name.ToString() == "Survey")
    {
        @Html.Partial("SurveyRenderer", item);
    }
    else if (item.GetType().Name.ToString() == "Brochure")
    {
        @Html.Partial("BrochureRenderer", item)
    }

    if (User.IsInRole("Admin"))
    {
        @Html.ActionLink("Edytuj", "Edit", new { id = item.PostId }) @:|
        @Html.ActionLink("Usuń", "Delete", new { id = item.PostId }) @:|
    }
    @Html.ActionLink("Szczegóły", "Details", new { id = item.PostId }) @:| Lubię to | Dodaj komentarz |
    @: Dodano: @item.CreatedAt.ToLongDateString() , @item.CreatedAt.ToShortTimeString()
@:</div>
    }
</div>
